import crin.chunk as Chunk
import crin.chunk.{Chunk, new_chunk}
import crin.opcode.{OpCode}
import crin.utils.{stdout}

def main(): u32 {

    val mut _chunk = new_chunk()
    val chunk = &mut _chunk; defer chunk.free()

    chunk.init()

    chunk.write(OpCode.Return.to_byte())

    val constant = chunk.add_constant(3)

    chunk
        .write(OpCode.Constant.to_byte())
        .write(constant)

    stdout().println(b"Test Chunk")
    stdout().println(chunk)


    return 0
}